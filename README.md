# 介绍

基于Cloudflare Workers和Pages的Telegraph图床。

# 功能

- 支持访客验证。
- 支持图片审查。
- 支持多文件上传。
- 支持查看历史记录。
- 支持批量管理后台文件。
- 支持在图床界面粘贴上传。
- 支持上传大于5MB的图片。
- 支持选择图片后会自动上传。
- 支持压缩功能，默认选择图片后自动压缩。
- 支持在管理界面显示图片上传时间，并按上传时间排序。
- 支持修改后台路径为 /admin，可在代码的第二行进行调整。
- 支持JPEG、JPG、PNG、GIF和MP4格式，GIF和MP4的大小需≤5MB。
- 默认仅代理数据库中的图片链接，访问通过其他TG图床上传的链接返回404。
- 支持URL、BBCode和Markdown格式，点击对应按钮可自动复制相应格式的链接。
- 对于需要自定义用户界面的用户，您可以自行修改代码。在修改时希望您能**保留项目的开源地址**。

# 部署教程
## 需要用到的变量和指令
### 变量
必填项目：

| 变量名          | 说明                                                                 |
|-----------------|----------------------------------------------------------------------|
| `DOMAIN`        | Workers 或 Pages的自定义域名。                                                |
| `USERNAME`      | 用于身份验证的用户名。                                         |
| `PASSWORD`      | 用于身份验证的密码。                                       |
| `ADMIN_PATH`    | 管理页面的路径。                                               |

绑定D1数据库的时候使用：

| 变量名          | 说明                                                                 |
|-----------------|----------------------------------------------------------------------|
| `DATABASE`      | 数据库变量，用于绑定数据库。                                         |

选填：

| 变量名          | 说明                                                                 |
|-----------------|----------------------------------------------------------------------|
| `ENABLE_AUTH`   | 设置为 `true` 时启用访客验证，为空或者不设置代表关闭访客验证，此时只有访问管理页需要验证账号密码。  |
| `NSFW_THRESHOLD`| 图片审查的强度，范围为 0 到 1，越接近 1 越审查宽松。                                     |
| `NSFW_API_URL`  | 图片审查 API 的 URL，填写后将启用该功能。示例 API: `https://api.jiasu.in/nsfw` |

### 指令
数据库初始化指令

```sql
CREATE TABLE media (
    key TEXT PRIMARY KEY,
    timestamp INTEGER NOT NULL,
    url TEXT NOT NULL
);
```
