# 介绍

基于 Cloudflare Workers 的 Telegraph 图床，默认开启压缩功能，支持上传大于 5MB 的图片，并提供后台管理等功能。

# 功能

- 支持选择图片后自动上传。
- 支持在图床界面粘贴上传。
- 支持上传大于 5MB 的图片。
- 支持在管理界面查看和播放MP4文件。
- 支持显示上传时间，按上传时间排序。
- 支持修改后台路径 `/admin`，可在代码的第二行进行修改。
- 支持图片管理（访问域名 `/admin`），图片支持懒加载。
- 支持仅代理自己上传的图片，通过其他TG图床上传的链接，无法访问。
- 选择图片后自动压缩，节省 Cloudflare 和 Telegraph 的存储，同时加快上传速度。
- 支持 JPEG、JPG、PNG、GIF、MP4 格式，GIF 和 MP4 的大小需 ≤ 5MB。
- 支持 URL、BBCode 和 Markdown 格式，点击对应按钮可自动复制相应格式的链接。

# 使用方法

将代码部署到 Cloudflare Worker，设置自定义域和变量（需要设置环境变量并绑定 KV 命名空间）。

## 步骤 1: 创建 KV 命名空间
1. 点击 **Workers 和 Pages**。
2. 点击 **KV**。
3. 点击 **创建命名空间**。
4. 填写命名空间名称（可随意命名）。
5. 点击 **添加**。

## 步骤 2: 创建 Worker
1. 点击 **Workers 和 Pages**。
2. 点击 **创建**。
3. 填写 Worker 名称（可随意命名）。
4. 点击 **部署**。

## 步骤 3: 添加自定义域
1. 点击刚刚创建的 Worker 名称。
2. 点击 **设置**。
3. 点击 **触发器**。
4. 点击 **添加自定义域**。

## 步骤 4: 添加环境变量
1. 点击刚刚创建的 Worker 名称。
2. 点击 **设置**。
3. 点击 **变量**。
4. 点击 **添加环境变量**。
5. 填写两个环境变量：```USERNAME```和```PASSWORD```，分别对应的值为账号和密码。

## 步骤 5: 绑定 KV 命名空间
1. 点击刚刚创建的 Worker 名称。
2. 点击 **设置**。
3. 点击 **变量**。
4. 点击 **KV 命名空间绑定**。
5. 点击 **编辑变量**。
6. 填写变量名称 `imgurl`，并选择前面设置的 KV 命名空间。

## 步骤 6: 编辑 Worker 代码
1. 点击刚刚创建的 Worker 名称。
2. 点击 **编辑代码**。
3. 清除 Worker 原本的代码。
4. 复制粘贴 [worker.js](https://raw.githubusercontent.com/0-RTT/telegraph/main/worker.js) 中的代码。
5. 将代码第一行中的```example.com```改为你的自定义域。
6. 点击 **部署**。
7. 访问自定义域名即可访问图床。
